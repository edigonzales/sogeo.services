<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>QGIS server vs. QGIS server</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="keywords" content="">
    <meta name="generator" content="JBake">

    <!-- Le styles -->
    <link href="../../../../css/bootstrap.min.css" rel="stylesheet">
    <link href="../../../../css/asciidoctor.css" rel="stylesheet">
    <link href="../../../../css/base.css" rel="stylesheet">
    <link href="../../../../css/prettify.css" rel="stylesheet">
    <link href="../../../../css/coderay.css" rel="stylesheet">
    <link href="../../../../css/sogeo.css" rel="stylesheet">

    <!-- web fonts -->
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,400italic,700,300' rel='stylesheet' type='text/css'>
    <!--[if lt IE 9]>
      <script src="../../../../js/html5shiv.min.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <!--<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">-->
    <link rel="shortcut icon" href="../../../../favicon.ico">
  </head>
  <body onload="prettyPrint()">
    <div id="wrap">

	<!-- Fixed navbar -->
    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
			<li><a href="../../../../index.html">Home</a></li>
			<li><a href="../../../../archive.html">Archive</a></li>
            <li><a href="../../../../feed.xml">Subscribe</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>

    <div class="container">

	<div class="page-header">
		<h1>QGIS server vs. QGIS server</h1>
	</div>

	<p class="date"><em>29 January 2014</em></p>

	<p><div class="paragraph">
<p>QGIS Server ist schnell. Das zeigt die <a href="http://blog.sourcepole.ch/assets/2013/6/17/fossgis_2013_performanceoptimierte_wms_dienste.pdf">Präsentation</a> an der FOSSGIS 2013. Ich wurde aber das Gefühl nie los, dass sich die Performance verschlechtert, falls Layer kaskadiert werden. Was verstehe ich unter &laquo;kaskadiert&raquo;?</p>
</div>
<div class="paragraph">
<p>Häufig benutzte Grundlagen- resp. Hintergrundkarten werden einmalig erstellt und über <strong>eine</strong> Schnittstelle (WMS) zur Verfügung gestellt. Dies ist vor allem praktisch, falls die Grundlagenkarte aus vielen einzelnen Layern und Datensätzen besteht.</p>
</div>
<div class="paragraph">
<p>Für insgesamt fünf Hintergrundkarten habe ich mit JMeter Lasttests durchgeführt:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>AV-WMS</p>
</li>
<li>
<p>Plan für das Grundbuch</p>
</li>
<li>
<p>Basisplan</p>
</li>
<li>
<p>Orthofoto</p>
</li>
<li>
<p>Kombination aus Orthofoto und Basisplan resp. Plan für das Grundbuch</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Dabei wurden drei Ansätze (= drei QGIS-Projekte = drei WMS-Dienste) verfolgt:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><em>direkt</em>: Layer werden in QGIS direkt geladen, z.B. VRT-Layer für Orthofotos, Postgis für Vektordaten.</p>
</li>
<li>
<p><em>embedded</em>: Layer werden via QGIS-Projekt (Variante 1) geladen (&laquo;Embed Layers and Groups&#8230;&#8203;&raquo;).</p>
</li>
<li>
<p><em>wms</em>: Layer wird von Variante 1 als WMS in QGIS-Projekt geladen (= Kaskadieren).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Die Testbedingungen sind wie folgt:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Hetzner-Server:</p>
<div class="ulist">
<ul>
<li>
<p>Intel i7-3770 (4 Cores, 8 Threads, 3.4 - 3.9 GHz)</p>
</li>
<li>
<p>16 GB RAM</p>
</li>
<li>
<p>2 x 3 TB HDD (7200 rpm, Software-RAID 1)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Ubuntu 10.04</p>
</li>
<li>
<p>PostgreSQL 8.4 / Postgis 2.0</p>
</li>
<li>
<p>QGIS enterprise 13.03b</p>
</li>
<li>
<p>JMeter, Datenbank und QGIS auf dem gleichen Server</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Exemplarisch das Resultat des AV-WMS:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="../../../../../images/qgisserver_vs_qgisserver/avwms_bench.png" alt="AVWMS Benchmark">
</div>
</div>
<div class="paragraph">
<p>Embedded Layer und Gruppen sind gleichauf mit direkt geladenen Datensätzen. Massiv hingegen ist der Einbruch unter Last bei kaskadierten Layern. Warum der Einbruch so massiv ist, entzieht sich meiner Kenntnis. Zu empfehlen sind daher kaskadierende Layer nur beschränkt. Die bessere Lösung ist das direkte Einbinden der Datensätze oder &laquo;eingebettete&raquo; Datensätze.</p>
</div>
<div class="paragraph">
<p>Für alle anderen Hintergrundkarten zeigt sich exakt das gleiche Bild. Sämtliche Resultate und einige Beispielbilder gibts <a href="http://edigonzales.github.io/qgisserver_vs_qgisserver/">hier</a>.</p>
</div></p>

	<p class="author">
		Posted by Stefan Ziegler. |
		<a href="/tags/QGIS.html">QGIS</a>
		, <a href="/tags/QGIS-Server.html">QGIS-Server</a>
		, <a href="/tags/WMS.html">WMS</a>
		, <a href="/tags/Benchmark.html">Benchmark</a>
		
	</p>

	<hr />

		</div>
		<div id="push"></div>
    </div>

    <div id="footer">
      <div class="container">
        <p class="muted credit">&copy; 2016 Stefan Ziegler | Baked with <a href="http://jbake.org">JBake v2.4.0</a></p>
      </div>
    </div>

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../../../../js/jquery-1.11.1.min.js"></script>
    <script src="../../../../js/bootstrap.min.js"></script>
	<script src="../../../../js/prettify.js"></script>
  </body>
</html>
